{"mappings":"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","sources":["src/services/MovieObjectByID.js","src/services/modalTemplate.js"],"sourcesContent":["import { getMovies } from \"./getMovies\";\n\nexport async function getMovieByID(id) {\n    const nul = null;\n    try {\n        const movieObj = await getMovies(`/movie/${id}`, nul, 1)\n        console.log(movieObj.data); //прилітає об'єкт з детальною інформацією\n        return movieObj.data\n    } catch (error) {\n        console.error(error);\n    }\n}\n\n//!!!!!!! функція не підключена до index.html\n// console.log(getMovieByID(990691));\n\n\n//id-шники для прикладу\n// 990691\n// 718789\n// 453395","import { getMovieByID } from './MovieObjectByID';\n// import { addWatchedMoviesInStorage, addQueueMoviesInStorage} from './myLibraryPage';\n\nconst openModalCard = document.querySelector('[data-modalCard-open]');\nconst closeModalCard = document.querySelector('[data-modalCard-close]');\nconst modalCardCont = document.querySelector('[data-modalCard]');\nconst backdrop = document.querySelector('[backdrop]');\nconst cardContMarking = document.querySelector('.card__cont-marking');\nconst cardTableContainer = document.querySelector('.card__table');\nconst addToWatchedButton = document.querySelector('[data-add-to-watched]');\nconst addToQueueButton = document.querySelector('[data-add-to-queue]');\n\nopenModalCard.addEventListener('click', onOpenModalCard);\ncloseModalCard.addEventListener('click', onCloseModalCard);\nmodalCardCont.addEventListener('click', onBackModalDropClick);\nwindow.addEventListener('keydown', onEscClick);\n\n// local\nconst KEY_WATCHED = 'watched-movies-in-storage';\nconst KEY_QUEUE = 'queue-movies-in-storage';\nconst moviesWatchedInLocal = JSON.parse(localStorage.getItem(KEY_QUEUE)) || [];\nconst moviesQueueInLocal = JSON.parse(localStorage.getItem(KEY_QUEUE)) || [];\n//\n\nfunction onCloseModalCard() {\n  modalCardCont.classList.add('no-activ');\n  const htmlEl = document.getElementsByTagName('HTML')[0];\n  htmlEl.classList.remove('no-scroll');\n  cardContMarking.innerHTML = '';\n  cardTableContainer.innerHTML = '';\n}\n\nfunction onBackModalDropClick(evt) {\n  if (!evt.target.classList.contains('card__cont')) {\n    return;\n  }\n  onCloseModalCard();\n}\n\nfunction onEscClick(evt) {\n  if (evt.key === 'Escape') {\n    onCloseModalCard();\n    backdrop.classList.add('is-hidden');\n  }\n}\n\n// +++++++++++++++++++++++++++++++\nfunction onOpenModalCard(event) {\n  if (event.target.classList.contains('grid-movie-card')) {\n    const filmID = event.target.attributes.id.value;\n    //визиваємо ф-ію, що записує об'єкт фільму у змінну\n    getMovieByID(filmID).then(res => cardMarkUp(res));\n\n    modalCardCont.classList.remove('no-activ');\n    const htmlEl = document.getElementsByTagName('HTML')[0];\n    htmlEl.classList.add('no-scroll');\n  }\n  return;\n}\n\nfunction cardMarkUp(filmObject) {\n  const markUPImg = `<img class=\"card__img\" src=\"http://image.tmdb.org/t/p/w500${filmObject.poster_path}\" alt=\"${filmObject.title}\" />`;\n  cardContMarking.insertAdjacentHTML('afterbegin', markUPImg);\n  const trimMarkupVote = trimMarkup(filmObject.vote_average);\n  const trimMarkupPopular = trimMarkup(filmObject.popularity);\n\n  const markUp = `<h1 class=\"card__table-heder\">${filmObject.title}</h1>\n      <table class=\"card__table\">\n        <tr class=\"card__table-vote\">\n          <td class=\"card__table-name \">Vote / Votes</td>\n          <td class=\"card__table-value \"><span class=\"average\">${trimMarkupVote}</span> / <span class=\"vote\">${filmObject.vote_count}</span></td>\n        </tr>\n        <tr class=\"card__table-popularity\">\n          <td class=\"card__table-name\">Popularity</td>\n          <td class=\"card__table-value\">${trimMarkupPopular}</td>\n        </tr>\n        <tr class=\"card__table-title\">\n          <td class=\"card__table-name\">Original Title</td>\n          <td class=\"card__table-value\">${filmObject.title}</td>\n        </tr>\n        <tr class=\"card__table-genre\">\n          <td class=\"card__table-name last-child\">Genre</td>\n          <td class=\"card__table-value last-child\">${filmObject.genre}</td>\n        </tr>\n      </table>\n      <div class=\"card__about\">\n        <h2 class=\"card__about-heder\">About</h2>\n        <p class=\"card__about-text\">${filmObject.overview}</p>\n      </div>`;\n  cardTableContainer.insertAdjacentHTML('afterbegin', markUp);\n  addToWatchedButton.addEventListener('click', () =>\n    addWatchedMoviesInStorage(filmObject)\n  );\n  addToQueueButton.addEventListener('click', () =>\n    addQueueMoviesInStorage(filmObject)\n  );\n}\n\nexport function addWatchedMoviesInStorage(filmObject) {\n  const localStorageArr = localStorage.getItem(KEY_WATCHED) || [];\n  console.log('Before', localStorageArr);\n  console.log('Film', filmObject.id);\n\n  if (!localStorageArr.includes(filmObject.id)) {\n    moviesWatchedInLocal.push(filmObject);\n    // console.log(\"In if\",moviesWatchedInLocal);\n\n    localStorage.setItem(KEY_WATCHED, JSON.stringify(moviesWatchedInLocal));\n\n    //  getWatchedMoviesInStorage();\n  }\n\n  return;\n}\n\nexport function addQueueMoviesInStorage(filmObject) {\n  const localStorageArr = localStorage.getItem(KEY_QUEUE) || [];\n  console.log('Before', localStorageArr);\n  console.log(filmObject);\n  console.log('Цей фільм вже є', localStorageArr.includes(filmObject.id));\n  if (!localStorageArr.includes(filmObject.id)) {\n    moviesQueueInLocal.push(filmObject);\n    // console.log(\"In if\",moviesQueueInLocal);\n\n    localStorage.setItem(KEY_QUEUE, JSON.stringify(moviesQueueInLocal));\n    // getQueueMoviesInStorage();\n  }\n  return;\n}\nfunction trimMarkup(trim) {\n  const trimMarkup = trim.toFixed(1);\n  return trimMarkup;\n}\n"],"names":["$7pbsT","parcelRequire","$484f9a41a2f33c34$export$b3306cf7e559bc14","id","$484f9a41a2f33c34$var$_getMovieByID","apply","this","arguments","default","$parcel$interopDefault","$2TvXO","mark","_callee","movieObj","$gEIo3","getMovies","concat","_ctx","sent","console","log","data","error","t0","$1f7cb0515f52d0e3$var$openModalCard","document","querySelector","$1f7cb0515f52d0e3$var$closeModalCard","$1f7cb0515f52d0e3$var$modalCardCont","$1f7cb0515f52d0e3$var$backdrop","$1f7cb0515f52d0e3$var$cardContMarking","$1f7cb0515f52d0e3$var$cardTableContainer","$1f7cb0515f52d0e3$var$addToWatchedButton","$1f7cb0515f52d0e3$var$addToQueueButton","addEventListener","event","target","classList","contains","attributes","value","then","res","filmObject","markUPImg","poster_path","title","insertAdjacentHTML","trimMarkupVote","$1f7cb0515f52d0e3$var$trimMarkup","vote_average","trimMarkupPopular","popularity","markUp","vote_count","genre","overview","localStorageArr","localStorage","getItem","$1f7cb0515f52d0e3$var$KEY_WATCHED","includes","$1f7cb0515f52d0e3$var$moviesWatchedInLocal","push","setItem","JSON","stringify","$1f7cb0515f52d0e3$export$32d5ae83b7163fdd","$1f7cb0515f52d0e3$var$KEY_QUEUE","$1f7cb0515f52d0e3$var$moviesQueueInLocal","$1f7cb0515f52d0e3$export$39d4af248a09546d","$1f7cb0515f52d0e3$var$cardMarkUp","remove","getElementsByTagName","add","$1f7cb0515f52d0e3$var$onCloseModalCard","evt","window","key","parse","innerHTML","trim","toFixed"],"version":3,"file":"library.e4e71530.js.map"}