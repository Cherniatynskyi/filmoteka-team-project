{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEOC,eAAeC,EAAaC,GAE/B,IACI,MAAMC,QAAiB,EAAAL,EAAAM,WAAU,UAAUF,IAFnC,KAE8C,GAEtD,OADAG,QAAQC,IAAIH,EAASI,MACdJ,EAASI,I,CAClB,MAAOC,GACLH,QAAQG,MAAMA,E;WCHtB,MAAMC,EAAgBC,SAASC,cAAc,yBACvCC,EAAiBF,SAASC,cAAc,0BACxCE,EAAgBH,SAASC,cAAc,oBACvCG,EAAWJ,SAASC,cAAc,cAClCI,EAAkBL,SAASC,cAAc,uBACzCK,EAAqBN,SAASC,cAAc,gBAC5CM,EAAiBP,SAASQ,iBAAiB,iBAEjDT,EAAcU,iBAAiB,SA+B/B,SAAyBC,GACvB,GAAIA,EAAMC,OAAOC,UAAUC,SAAS,mBAAoB,CACtD,MAAMC,EAASJ,EAAMC,OAAOI,WAAWvB,GAAGwB,MAE1CC,iBAAiBL,UAAUM,OAAO,qBAClCC,mBAAmBP,UAAUM,OAAO,qBAGpC3B,EAAauB,GAAQM,MAAKC,GAS9B,SAAoBC,GAClBC,sBAAsBD,EA5CJ,6BA6ClBE,oBAAoBF,EA5CJ,2BA6ChB,IAAIG,EAAY,6DAA6DH,EAAWI,qBAAqBJ,EAAWK,YAOxHC,EAAeN,EACfjB,EAAgBwB,mBAAmB,aAAcJ,GAEjD,MAAMK,EAAiBC,EAAWT,EAAWU,cACvCC,EAAoBF,EAAWT,EAAWY,YAEhD,IACIC,EADcb,EAAWc,OAExBd,EAAWc,OAAOC,OAGrBF,EAAY,iBAKd,MAAMG,EAAS,iCAAiChB,EAAWK,mNAIIG,iCAA8CR,EAAWiB,uLAIhFN,sKAIAX,EAAWK,uLAIAQ,iKAKfb,EAAWkB,6BAE/ClC,EAAmBuB,mBAAmB,aAAcS,GACpD/B,EAAekC,SAAQC,GAAOA,EAAIjC,iBAAiB,QAASkC,I,CA3DzBC,CAAWvB,KAE5ClB,EAAcS,UAAUM,OAAO,YAChBlB,SAAS6C,qBAAqB,QAAQ,GAC9CjC,UAAUkC,IAAI,Y,CAEvB,M,IA5CF5C,EAAeO,iBAAiB,QAASsC,GACzC5C,EAAcM,iBAAiB,SAe/B,SAA8BuC,GAC5B,IAAKA,EAAIrC,OAAOC,UAAUC,SAAS,cACjC,OAEFkC,G,IAlBFE,OAAOxC,iBAAiB,WAqBxB,SAAoBuC,GACF,WAAZA,EAAIE,MACNH,IACA3C,EAASQ,UAAUkC,IAAI,a,IApB3B,IAAIlB,EAAe,KAEnB,SAASmB,IACP5C,EAAcS,UAAUkC,IAAI,YACb9C,SAAS6C,qBAAqB,QAAQ,GAC9CjC,UAAUM,OAAO,aACxBb,EAAgB8C,UAAY,GAC5B7C,EAAmB6C,UAAY,E,CAuFjC,SAASR,EAAgBS,GACvB,MAAMC,MAAEA,GAAUD,EAAEE,cAAcC,SA6BpC,SAA4BL,EAAKM,GAC/B,MAAMC,EAAwBC,aAAaC,QAAQT,GACnD,IAAKO,EAEH,YADAC,aAAaE,QAAQV,EAAKW,KAAKC,UAAU,CAACN,KAG5C,IAAIO,EAAgBF,KAAKG,MAAMP,GACGM,EAAcE,MAC9CC,GAAQA,EAAK1E,KAAO2E,gBAAgB3E,KAIpCkE,aAAaE,QAAQV,EAAKW,KAAKC,UAAUC,KAEzCA,EAAcK,KAAKD,iBACnBT,aAAaE,QA7IG,4BA6IkBC,KAAKC,UAAUC,I,CA1CnDM,CAAmBhB,EAAOzB,GAa5B,SAAmBsB,GACjB,MAAMoB,EAAc,qBACd5B,EAAM1C,SAASC,cAAc,UAAUiD,KAE7C,GAAIR,EAAI9B,UAAUC,SAASyD,GAGzB,OAFA5B,EAAI9B,UAAUM,OAAOoD,QACrB5B,EAAI6B,YAAc,UAAYrB,GAIhCR,EAAI9B,UAAUkC,IAAIwB,GAClB5B,EAAI6B,YAAc,eAAiBrB,C,CAvBnCsB,CAAUnB,GAEV,MAAMoB,EAAYzE,SAASC,cAAc,UAAUoD,KACxCoB,EAKL7D,UAAUC,SAAS,Y,CAwD3B,SAASkB,EAAW2C,GAElB,OADmBA,EAAKC,QAAQ,E,CAgElC1D,iBAAiBR,iBAAiB,SAAS,KACL,qBAAhCQ,iBAAiBsD,cACnBtD,iBAAiBsD,YAAc,qBAC/BtD,iBAAiBL,UAAUkC,IAAI,sBAEG,gBAAhC7B,iBAAiBsD,cACnBtD,iBAAiBsD,YAAc,iBAC/BtD,iBAAiBL,UAAUkC,IAAI,qB,IAInC3B,mBAAmBV,iBAAiB,SAAS,KACL,uBAAlCU,mBAAmBoD,cACrBpD,mBAAmBoD,YAAc,uBACjCpD,mBAAmBP,UAAUkC,IAAI,sBAEG,kBAAlC3B,mBAAmBoD,cACrBpD,mBAAmBoD,YAAc,mBACjCpD,mBAAmBP,UAAUkC,IAAI,qB","sources":["src/services/MovieObjectByID.js","src/services/modalTemplate.js"],"sourcesContent":["import { getMovies } from \"./getMovies\";\n\nexport async function getMovieByID(id) {\n    const nul = null;\n    try {\n        const movieObj = await getMovies(`/movie/${id}`, nul, 1)\n        console.log(movieObj.data); //прилітає об'єкт з детальною інформацією\n        return movieObj.data\n    } catch (error) {\n        console.error(error);\n    }\n}\n\n//!!!!!!! функція не підключена до index.html\n// console.log(getMovieByID(990691));\n\n\n//id-шники для прикладу\n// 990691\n// 718789\n// 453395","import { getMovieByID } from './MovieObjectByID';\nimport {\n  getWatchedMoviesInStorage,\n  getQueueMoviesInStorage,\n} from './myLibraryPage';\n\nconst openModalCard = document.querySelector('[data-modalCard-open]');\nconst closeModalCard = document.querySelector('[data-modalCard-close]');\nconst modalCardCont = document.querySelector('[data-modalCard]');\nconst backdrop = document.querySelector('[backdrop]');\nconst cardContMarking = document.querySelector('.card__cont-marking');\nconst cardTableContainer = document.querySelector('.card__table');\nconst addToLSButtons = document.querySelectorAll('[data-add-to]');\n\nopenModalCard.addEventListener('click', onOpenModalCard);\ncloseModalCard.addEventListener('click', onCloseModalCard);\nmodalCardCont.addEventListener('click', onBackModalDropClick);\nwindow.addEventListener('keydown', onEscClick);\n\nconst KEY_WATCHED = 'watched-movies-in-storage';\nconst KEY_QUEUE = 'queue-movies-in-storage';\nlet currentMovie = null;\n\nfunction onCloseModalCard() {\n  modalCardCont.classList.add('no-activ');\n  const htmlEl = document.getElementsByTagName('HTML')[0];\n  htmlEl.classList.remove('no-scroll');\n  cardContMarking.innerHTML = '';\n  cardTableContainer.innerHTML = '';\n}\n\nfunction onBackModalDropClick(evt) {\n  if (!evt.target.classList.contains('card__cont')) {\n    return;\n  }\n  onCloseModalCard();\n}\n\nfunction onEscClick(evt) {\n  if (evt.key === 'Escape') {\n    onCloseModalCard();\n    backdrop.classList.add('is-hidden');\n  }\n}\n\nfunction onOpenModalCard(event) {\n  if (event.target.classList.contains('grid-movie-card')) {\n    const filmID = event.target.attributes.id.value;\n\n    addToQueueButton.classList.remove('card-buton-change');\n    addToWatchedButton.classList.remove('card-buton-change');\n\n\n    getMovieByID(filmID).then(res => cardMarkUp(res));\n\n    modalCardCont.classList.remove('no-activ');\n    const htmlEl = document.getElementsByTagName('HTML')[0];\n    htmlEl.classList.add('no-scroll');\n  }\n  return;\n}\n\nfunction cardMarkUp(filmObject) {\n  checkMovieByIdWatched(filmObject, KEY_WATCHED);\n  checkMovieByIdQueue(filmObject, KEY_QUEUE);\n  let markUPImg = `<img class=\"card__img\" src=\"http://image.tmdb.org/t/p/w500${filmObject.poster_path}\" alt=\"${filmObject.title}\" />`;\n  // if (filmObject.poster_path) {\n  //   markUPImg = `<img class=\"card__img\" src=\"http://image.tmdb.org/t/p/w500${filmObject.poster_path}\" alt=\"${filmObject.title}\" />`;\n  // } else {\n  //   markUPImg = `<img class=\"card__img\" src=\"./img/placeholder.jpeg\" alt=\"${filmObject.title}\" />`;\n  // }\n\n  currentMovie = filmObject;\n  cardContMarking.insertAdjacentHTML('afterbegin', markUPImg);\n\n  const trimMarkupVote = trimMarkup(filmObject.vote_average);\n  const trimMarkupPopular = trimMarkup(filmObject.popularity);\n\n  let markupGenre = filmObject.genres;\n  let cardGenre\n  if (!filmObject.genres.length === 0) {\n    cardGenre = markupGenre.map(genr => genr.name);\n  } else {\n    cardGenre = \"No information\"\n  }\n\n  // cardGenre: markupGenre.length > 0 ? cardGenre.join(', ') : 'Unknown';\n\n  const markUp = `<h1 class=\"card__table-heder\">${filmObject.title}</h1>\n      <table class=\"card__table\">\n        <tr class=\"card__table-vote\">\n          <td class=\"card__table-name \">Vote / Votes</td>\n          <td class=\"card__table-value \"><span class=\"average\">${trimMarkupVote}</span> / <span class=\"vote\">${filmObject.vote_count}</span></td>\n        </tr>\n        <tr class=\"card__table-popularity\">\n          <td class=\"card__table-name\">Popularity</td>\n          <td class=\"card__table-value\">${trimMarkupPopular}</td>\n        </tr>\n        <tr class=\"card__table-title\">\n          <td class=\"card__table-name\">Original Title</td>\n          <td class=\"card__table-value\">${filmObject.title}</td>\n        </tr>\n        <tr class=\"card__table-genre\">\n          <td class=\"card__table-name last-child\">Genre</td>\n          <td class=\"card__table-value last-child\">${cardGenre}</td>\n        </tr>\n      </table>\n      <div class=\"card__about\">\n        <h2 class=\"card__about-heder\">About</h2>\n        <p class=\"card__about-text\">${filmObject.overview}</p>\n      </div>`;\n  cardTableContainer.insertAdjacentHTML('afterbegin', markUp);\n  addToLSButtons.forEach(btn => btn.addEventListener('click', onModalBtnClick));\n}\n\nfunction onModalBtnClick(e) {\n  const { addTo } = e.currentTarget.dataset;\n\n  addMoviesToStorage(addTo, currentMovie);\n  toggleBtn(addTo);\n\n  const activeBtn = document.querySelector(`.modal-${addTo}`);\n  checkPlace(activeBtn);\n}\n\nfunction checkPlace(btn) {\n  return (\n    btn.classList.contains('is-active')\n  );\n}\n\nfunction toggleBtn(key) {\n  const classActive = 'modal__btn--active';\n  const btn = document.querySelector(`.modal-${key}`);\n\n  if (btn.classList.contains(classActive)) {\n    btn.classList.remove(classActive);\n    btn.textContent = 'Add to ' + key;\n    return;\n  }\n\n  btn.classList.add(classActive);\n  btn.textContent = 'Remove from ' + key;\n}\n\nfunction addMoviesToStorage(key, movie) {\n  const watchedMovieInStorage = localStorage.getItem(key);\n  if (!watchedMovieInStorage) {\n    localStorage.setItem(key, JSON.stringify([movie]));\n    return;\n  }\n  let watchedMovies = JSON.parse(watchedMovieInStorage);\n  const watchedMoviesInStorageArr = watchedMovies.find(\n    item => item.id === addWatchedMovie.id\n\n  );\n  if (watchedMoviesInStorageArr) {\n    localStorage.setItem(key, JSON.stringify(watchedMovies));\n  } else {\n    watchedMovies.push(addWatchedMovie);\n    localStorage.setItem(KEY_WATCHED, JSON.stringify(watchedMovies));\n  }\n}\n\nfunction addQueueMoviesInStorage(addQueueMovie) {\n  const queueMovieInStorage = localStorage.getItem(KEY_QUEUE);\n  if (!queueMovieInStorage) {\n    localStorage.setItem(KEY_QUEUE, JSON.stringify([addQueueMovie]));\n    return;\n  }\n  let queueMovies = JSON.parse(queueMovieInStorage);\n  const queueMoviesInStorageArr = queueMovies.find(\n    item => item.id === addQueueMovie.id\n  );\n  if (queueMoviesInStorageArr) {\n    localStorage.setItem(KEY_QUEUE, JSON.stringify(queueMovies));\n  } else {\n    queueMovies.push(addQueueMovie);\n    localStorage.setItem(KEY_QUEUE, JSON.stringify(queueMovies));\n\n  }\n}\n\nfunction trimMarkup(trim) {\n  const trimMarkup = trim.toFixed(1);\n  return trimMarkup;\n}\n\n// function checkMovieByIdWatched(movie, key) {\n//   const lockalStorageId = JSON.parse(localStorage.getItem(key)) || [];\n//   console.log(lockalStorageId, 'Просмотренные фильмы');\n//   const includesMovie = lockalStorageId.find(elem => elem.id === movie.id);\n//   console.log(includesMovie, 'нука');\n//   if (!includesMovie) {\n//     addToWatchedButton.addEventListener('click', () =>\n//       addWatchedMoviesInStorage(movie)\n//     );\n//     addToWatchedButton.textContent = 'Add to watched';\n//   } else if (includesMovie) {\n//     addToWatchedButton.addEventListener('click', () =>\n//       removeMovieFromWatched(movie, key)\n//     );\n//     addToWatchedButton.textContent = 'Remove from watched';\n//   }\n// }\n// function checkMovieByIdQueue(movie, key) {\n//   const lockalStorageId = JSON.parse(localStorage.getItem(key)) || [];\n//   console.log(lockalStorageId, 'Просмотренные фильмы');\n//   const includesMovie = lockalStorageId.find(elem => elem.id === movie.id);\n\n//   if (!includesMovie) {\n//     console.log(lockalStorageId.includes(includesMovie));\n//     addToQueueButton.addEventListener('click', () =>\n//       addQueueMoviesInStorage(movie)\n//     );\n//     addToQueueButton.textContent = 'Add to queue';\n//   } else if (includesMovie) {\n//     addToQueueButton.addEventListener('click', () =>\n//       removeMovieFromQueue(movie, key)\n//     );\n//     addToQueueButton.textContent = 'Remove from queue';\n//   }\n// }\n\nfunction removeMovieFromWatched(movie) {\n  const localStorageArr = JSON.parse(localStorage.getItem(KEY_WATCHED));\n  const includesMovie = localStorageArr.find(elem => elem.id === movie.id);\n  if (includesMovie) {\n    const updatedArr = localStorageArr.filter(elem => elem.id !== movie.id);\n    localStorage.setItem(KEY_WATCHED, JSON.stringify(updatedArr));\n  }\n\n  getWatchedMoviesInStorage();\n}\n\nfunction removeMovieFromQueue(movie) {\n  const localStorageArr = JSON.parse(localStorage.getItem(KEY_QUEUE));\n  const includesMovie = localStorageArr.find(elem => elem.id === movie.id);\n  if (includesMovie) {\n    const updatedArr = localStorageArr.filter(elem => elem.id !== movie.id);\n    localStorage.setItem(KEY_QUEUE, JSON.stringify(updatedArr));\n  }\n\n  getQueueMoviesInStorage();\n}\n\n// Dynamic changing text-content on modal buttons\n\naddToQueueButton.addEventListener('click', () => {\n  if (addToQueueButton.textContent == 'Remove from queue') {\n    addToQueueButton.textContent = 'Removed from Queue';\n    addToQueueButton.classList.add('card-buton-change');\n  }\n  if (addToQueueButton.textContent == 'Add to queue') {\n    addToQueueButton.textContent = 'Added to Queue';\n    addToQueueButton.classList.add('card-buton-change');\n  }\n});\n\naddToWatchedButton.addEventListener('click', () => {\n  if (addToWatchedButton.textContent == 'Remove from watched') {\n    addToWatchedButton.textContent = 'Removed from watched';\n    addToWatchedButton.classList.add('card-buton-change');\n  }\n  if (addToWatchedButton.textContent == 'Add to watched') {\n    addToWatchedButton.textContent = 'Added to Watched';\n    addToWatchedButton.classList.add('card-buton-change');\n  }\n});\n\n"],"names":["$diLRM","parcelRequire","async","$b6d92f438973dbcb$export$b3306cf7e559bc14","id","movieObj","getMovies","console","log","data","error","$8532299c9a64f3d8$var$openModalCard","document","querySelector","$8532299c9a64f3d8$var$closeModalCard","$8532299c9a64f3d8$var$modalCardCont","$8532299c9a64f3d8$var$backdrop","$8532299c9a64f3d8$var$cardContMarking","$8532299c9a64f3d8$var$cardTableContainer","$8532299c9a64f3d8$var$addToLSButtons","querySelectorAll","addEventListener","event","target","classList","contains","filmID","attributes","value","addToQueueButton","remove","addToWatchedButton","then","res","filmObject","checkMovieByIdWatched","checkMovieByIdQueue","markUPImg","poster_path","title","$8532299c9a64f3d8$var$currentMovie","insertAdjacentHTML","trimMarkupVote","$8532299c9a64f3d8$var$trimMarkup","vote_average","trimMarkupPopular","popularity","cardGenre","genres","length","markUp","vote_count","overview","forEach","btn","$8532299c9a64f3d8$var$onModalBtnClick","$8532299c9a64f3d8$var$cardMarkUp","getElementsByTagName","add","$8532299c9a64f3d8$var$onCloseModalCard","evt","window","key","innerHTML","e","addTo","currentTarget","dataset","movie","watchedMovieInStorage","localStorage","getItem","setItem","JSON","stringify","watchedMovies","parse","find","item","addWatchedMovie","push","$8532299c9a64f3d8$var$addMoviesToStorage","classActive","textContent","$8532299c9a64f3d8$var$toggleBtn","activeBtn","trim","toFixed"],"version":3,"file":"library.9716a764.js.map"}