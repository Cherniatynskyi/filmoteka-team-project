!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){a[t]=e},e.parcelRequired7c6=r);var o=r("7pbsT"),c=r("2TvXO"),d=r("gEIo3");function i(t){return s.apply(this,arguments)}function s(){return(s=(0,o.default)(t(c).mark((function e(n){var a;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null,t.prev=1,t.next=4,(0,d.getMovies)("/movie/".concat(n),null,1);case 4:return a=t.sent,console.log(a.data),t.abrupt("return",a.data);case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),e,null,[[1,9]])}//!!!!!!! функція не підключена до index.html
)))).apply(this,arguments)}var l=r("9KRxl"),u=document.querySelector("[data-modalCard-open]"),f=document.querySelector("[data-modalCard-close]"),v=document.querySelector("[data-modalCard]"),g=document.querySelector("[backdrop]"),m=document.querySelector(".card__cont-marking"),p=document.querySelector(".card__table"),_=document.querySelector("[data-add-to-watched]"),b=document.querySelector("[data-add-to-queue]");u.addEventListener("click",(function(t){if(console.log(t.target),t.target.classList.contains("grid-movie-card")){var e=t.target.attributes.id.value;b.classList.remove("card-buton-change"),_.classList.remove("card-buton-change"),i(e).then((function(t){return function(t){(function(t,e){var n=JSON.parse(localStorage.getItem(e))||[];console.log(n,"Просмотренные фильмы");var a=n.find((function(e){return e.id===t.id}));console.log(a,"нука"),a?a&&(_.addEventListener("click",(function(){return function(t){var e=JSON.parse(localStorage.getItem(h));if(e.find((function(e){return e.id===t.id}))){var n=e.filter((function(e){return e.id!==t.id}));localStorage.setItem(h,JSON.stringify(n))}(0,l.getWatchedMoviesInStorage)()}(t)})),_.textContent="Remove from watched"):(_.addEventListener("click",(function(){return function(t){var e=localStorage.getItem(h);if(!e)return void localStorage.setItem(h,JSON.stringify([t]));var n=JSON.parse(e);n.find((function(e){return e.id===t.id}))||n.push(t),localStorage.setItem(h,JSON.stringify(n))}(t)})),_.textContent="Add to watched")})(t,h),function(t,e){var n=JSON.parse(localStorage.getItem(e))||[];console.log(n,"Просмотренные фильмы");var a=n.find((function(e){return e.id===t.id}));a?a&&(b.addEventListener("click",(function(){return function(t){var e=JSON.parse(localStorage.getItem(S));if(e.find((function(e){return e.id===t.id}))){var n=e.filter((function(e){return e.id!==t.id}));localStorage.setItem(S,JSON.stringify(n))}(0,l.getQueueMoviesInStorage)()}(t)})),b.textContent="Remove from queue"):(console.log(n.includes(a)),b.addEventListener("click",(function(){return function(t){var e=localStorage.getItem(S);if(!e)return void localStorage.setItem(S,JSON.stringify([t]));var n=JSON.parse(e);n.find((function(e){return e.id===t.id}))||n.push(t),localStorage.setItem(S,JSON.stringify(n))}(t)})),b.textContent="Add to queue")}(t,S);var e='<img class="card__img" src="http://image.tmdb.org/t/p/w500'.concat(t.poster_path,'" alt="').concat(t.title,'" />');m.insertAdjacentHTML("afterbegin",e);var n=y(t.vote_average),a=y(t.popularity),r=t.genres.map((function(t){return t.name})),o='<h1 class="card__table-heder">'.concat(t.title,'</h1>\n      <table class="card__table">\n        <tr class="card__table-vote">\n          <td class="card__table-name ">Vote / Votes</td>\n          <td class="card__table-value "><span class="average">').concat(n,'</span> / <span class="vote">').concat(t.vote_count,'</span></td>\n        </tr>\n        <tr class="card__table-popularity">\n          <td class="card__table-name">Popularity</td>\n          <td class="card__table-value">').concat(a,'</td>\n        </tr>\n        <tr class="card__table-title">\n          <td class="card__table-name">Original Title</td>\n          <td class="card__table-value">').concat(t.title,'</td>\n        </tr>\n        <tr class="card__table-genre">\n          <td class="card__table-name last-child">Genre</td>\n          <td class="card__table-value last-child">').concat(r,'</td>\n        </tr>\n      </table>\n      <div class="card__about">\n        <h2 class="card__about-heder">About</h2>\n        <p class="card__about-text">').concat(t.overview,"</p>\n      </div>");p.insertAdjacentHTML("afterbegin",o)}(t)})),v.classList.remove("no-activ"),document.getElementsByTagName("HTML")[0].classList.add("no-scroll")}return})),f.addEventListener("click",L),v.addEventListener("click",(function(t){if(!t.target.classList.contains("card__cont"))return;L()})),window.addEventListener("keydown",(function(t){"Escape"===t.key&&(L(),g.classList.add("is-hidden"))}));var h="watched-movies-in-storage",S="queue-movies-in-storage";function L(){v.classList.add("no-activ"),document.getElementsByTagName("HTML")[0].classList.remove("no-scroll"),m.innerHTML="",p.innerHTML=""}function y(t){return t.toFixed(1)}b.addEventListener("click",(function(){"Remove from queue"==b.textContent&&(b.textContent="Removed from Queue",b.classList.add("card-buton-change")),"Add to queue"==b.textContent&&(b.textContent="Added to Queue",b.classList.add("card-buton-change"))})),_.addEventListener("click",(function(){"Remove from watched"==_.textContent&&(_.textContent="Removed from watched",_.classList.add("card-buton-change")),"Add to watched"==_.textContent&&(_.textContent="Added to Watched",_.classList.add("card-buton-change"))}))}();
//# sourceMappingURL=library.764718a2.js.map
